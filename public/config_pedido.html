<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/config.css">
    <title>Configurar Pedido</title>
</head>
<body>
    <header>
        <a href="/SystemScreen">
            <img src="img/icons8-casa-64 (1).png" alt="voltar ao início">
        </a>
        <div>
            Logo do <br> restaurante
        </div>
    </header>
    <section class="main-section">
        <aside>
            <div class="container-foto-pedido">
                <img src="img/pexels-renestrgar-13814644.jpg" alt="foto do pedido">
            </div>
            <div class="desc">
                <h2 class="pedido-title" id="nameProduct">
                    Napolitana <!--adicionar dinamicamente-->
                </h2>
                <div class="pedido-desc" id="descProduct">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                </div>
            </div>
            <div id="pedido-options">
                <h2 class="pedido-title">OPCIONAIS</h2>
                <div id="verifyOptions"><!--opcionais serão coletados daqui-->
                </div>
            </div>
        </aside>
        <main>
            <section class="ToolBar">
                <section class="valuesToolBar">
                    <div class="ContainerInput">
                        <div>
                            <label for="inputQuantidade">Qtd</label>
                            <input type="number" name="quantidade" class="inputToolBar" id="inputQuantidade" placeholder="1" value="1">
                        </div>
                        <div>
                            <label for="inputvalorUnidade">Valor Unitário(R$)</label>
                            <input type="number" name="valorUnidade" class="inputToolBar" id="inputvalorUnidade" placeholder="R$ 50" value="50"><!--ovalor do produto deve ser passado diretamente para dento de value-->
                        </div>
                        <div>
                            <label for="inputsubTotal">Subtotal(R$)</label>
                            <input type="number" name="subTotal" class="inputToolBar" id="inputsubTotal" placeholder="R$ 50" value="50"><!--ovalor do produto deve ser passado diretamente para dento de value-->
                        </div>
                    </div>
                    <div class="containerButtonControl">
                        <div>
                            <button class="bttAdd">
                                <img src="img/icons8-adicionar-100.png" alt="adicionar quantidade">
                            </button><!--button add quantidade-->
                            <button class="bttRemove">
                                <img src="img/icons8-menos-100.png" alt="diminuir a quantidade">
                            </button><!--button remove quantidade-->
                        </div>
                        <div>
                            <button class="buttonCancel">Cancelar</button>
                            <button class="buttonAdicionar">Adicionar</button>
                        </div>
                    </div>
                </section>
                <button class="buttonOptions">OPICIONAIS</button>
            </section>
        </main>
    </section>
    <section id="containerpoupUp">
        <section class="PoupUp">
            <section class="img-poupup-product">
                <img src="img/pexels-renestrgar-13814644.jpg" alt="imagem do produto">
            </section>
            <section class="container-info-poupup">
                <section class="Title-PoupUp">
                    Qual borda você deseja?
                </section>
                <section class="container-formCheck">
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Catupiry (R$ 5)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Tradicional sem recheio (R$ 0)
                        </label>
                    </div>
                    <div class="container-check">
                        <label for="" class="labelCheckCustom">
                            <input type="checkbox" name="" class="checkbox">
                            <div class="checkBtt"></div>
                            Cheddar (R$ 5)
                        </label>
                    </div>
                </section>
                <section class="buttonPoupUp">
                    <button class="buttonReturn">
                        <img src="img/icons8-esquerda-96.png" alt="voltar">
                    </button>
                    <button class="buttonContinue">
                        CONFIRMAR
                    </button>
                </section>
            </section>
        </section>
        <button class="button-closePoupUp">
            <img src="img/icons8-excluir-128.png" alt="cancelar">
        </button>
    </section>
    <script>
        document.querySelectorAll('.labelCheckCustom').forEach(label => {
            label.addEventListener('click', function() {
                const checkbox = this.querySelector('input[type="checkbox"');

                // Se o checkbox já estiver marcado, apenas alterna
                if (!checkbox.checked) {
                    // Desmarcar todos os outros checkboxes
                    document.querySelectorAll('.checkbox').forEach(cb => {
                        cb.checked = false;
                    });
                }
                // Marca o checkbox clicado
                checkbox.checked = !checkbox.checked; // Alterna o estado do checkbox
            });
        });

        var buttonOptions = document.querySelector(".buttonOptions")
        var bttClosePoupUp = document.querySelector(".button-closePoupUp")
        var containerpoupUp = document.querySelector("#containerpoupUp")

        bttClosePoupUp.addEventListener("click", ()=>{
            containerpoupUp.style.display = "none"
        })

        buttonOptions.addEventListener("click", ()=>{
            containerpoupUp.style.display = "flex"
        })


        var bttAdd = document.querySelector(".bttAdd");
        var bttRemove = document.querySelector(".bttRemove");
        var inputToolBar = document.querySelectorAll(".inputToolBar");

        // Inicializa os valores dos inputs
        var subtotal = parseFloat(inputToolBar[2].value) || 0;
        var unidadevalor = parseFloat(inputToolBar[1].value) || 0;

        function updateSubtotal() {
            // Pega a quantidade atual, garantindo que sempre seja um número válido
            let qtd = parseInt(inputToolBar[0].value) || 1;

            // Recalcula o subtotal com base na quantidade e o valor unitário
            subtotal = unidadevalor * qtd;

            // Atualiza o valor do input correspondente ao subtotal
            inputToolBar[2].value = subtotal.toFixed(2);
        }

        // Função para adicionar quantidade
        bttAdd.addEventListener("click", () => {
            let qtd = parseInt(inputToolBar[0].value) || 0;
            
            // Incrementa a quantidade
            inputToolBar[0].value = qtd + 1;

            // Atualiza o subtotal
            updateSubtotal();
        });

        // Função para remover quantidade (não permite menor que 1)
        bttRemove.addEventListener("click", () => {
            let qtd = parseInt(inputToolBar[0].value) || 1;

            // Não permite que a quantidade seja menor que 1
            if (qtd > 1) {
                inputToolBar[0].value = qtd - 1;
                updateSubtotal();
            }
        });
        
        var buttonContinue = document.querySelector(".buttonContinue")

        buttonContinue.addEventListener("click", ()=>{
            containerpoupUp.style.display = "none"
        })

        document.addEventListener("DOMContentLoaded", () => {
            // Seleciona os botões
            const cancelButton = document.querySelector(".buttonCancel");
            const addButton = document.querySelector(".buttonAdicionar");

            // Adiciona evento de clique ao botão de cancelar
            cancelButton.addEventListener("click", () => {
                window.location.href = "https://albert-lima.github.io/SystemScreen/public/main.html";
            });

            // Adiciona evento de clique ao botão de adicionar
            addButton.addEventListener("click", () => {
                window.location.href = "https://albert-lima.github.io/SystemScreen/public/main.html";
            });
        });
    </script>
</body>
</html>